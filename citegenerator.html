<!doctype html>
<html>
<head>
<title>Citation Generator</title>
<style>
 body {
  font-family: Arial
 }
</style>
</head>
<body>
<h2>Citation Generator</h2>
<p>Cite a URL: <input type="url" id="url"> <button id="submit">Submit</button></p>
<p><ul id="results"><ul></p>
<section id="edit" hidden>
 <h3>Edit the Result</h3>
 <p>Fill in any incorrect or missing information</p>
 <p><input type="text" id="title" placeholder="Title"></p>
 <p><input type="text" id="author" placeholder="Author"></p>
 <p><input type="text" id="publisher" placeholder="Publisher"></p>
 <p><input type="text" id="date" placeholder="Year"></p>
 <p><button id="go">Go!</button></p>
</section>
<script>
var url;
window.addEventListener("load",function (){
 document.getElementById("submit").addEventListener("click", function (){
  url = document.getElementById("url").value;
  document.getElementById("url").value = "";
  fetch("https://bony-middle.glitch.me/getcit?u=" + url).then(function (r){return r.json()}).then(function (j){
   url = j.url;
   document.getElementById("title").value = j.title;
   document.getElementById("author").value = j.author;
   document.getElementById("publisher").value = j.publisher;
   document.getElementById("date").value = j.date;
   document.getElementById("edit").removeAttribute("hidden");
  })
 })
 document.getElementById("go").addEventListener("click",function (){
  document.getElementById("edit").setAttribute("hidden","hidden");
  var title = document.getElementById("title").value;
  var author = document.getElementById("author").value;
  var publisher = document.getElementById("publisher").value;
  var date = document.getElementById("date").value;
  var cite = '"' + title + '" ' + publisher + ', ' + (author !== "" ? author : "Author unknown") + ', ' + (date !== "" ? date : "Date unknown") + ', ' + url;
  var li = document.createElement("LI");
  li.innerHTML = cite;
  document.getElementById("results").append(li);
 })
})
</script>
</body>
</html>
